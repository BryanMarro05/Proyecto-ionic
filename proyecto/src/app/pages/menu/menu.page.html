<ion-header>
  <ion-toolbar class="custom-toolbar">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Nuestro Menú</ion-title>
    <!-- Botón del Carrito -->
    <ion-buttons slot="end">
      <ion-button [routerLink]="'/carrito'">
        <ion-icon slot="icon-only" name="cart"></ion-icon>
        <!-- ✅ Badge de conteo del carrito -->
        <ion-badge color="primary" *ngIf="cartItemCount > 0" class="cart-count-badge">
          {{ cartItemCount }}
        </ion-badge>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>

  <ion-toolbar class="custom-toolbar">
    <ion-segment [(ngModel)]="activeCategory" color="light">
      <ion-segment-button *ngFor="let cat of categories" [value]="cat.id">
        <ion-icon [name]="cat.icon"></ion-icon>
        <ion-label>{{ cat.label }}</ion-label>
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding" [fullscreen]="true">
  
  <div [ngSwitch]="activeCategory">

    <section *ngSwitchCase="'pizzas'">
      <ion-grid>
        <ion-row>
          <ion-col size="12" size-md="6" size-lg="4" *ngFor="let pizza of pizzas">
            <ion-card class="shake-card">
              <img [src]="getImageUrl(pizza.imagen)" (error)="$event.target.src = 'https://placehold.co/300x200/1d1641/ffffff?text=Error'" />
              <ion-card-header>
                <ion-card-title>{{ pizza.nombre }}</ion-card-title>
                <ion-card-subtitle *ngIf="pizza.descripcion">{{ pizza.descripcion }}</ion-card-subtitle>
              </ion-card-header>
              <ion-card-content class="shake-footer">
                <div class="item-prices">
                  <div class="price-box">
                    <span class="price-label">Personal</span>
                    <!-- ✅ Mostrar precio con símbolo de dólar -->
                    <span class="price">{{ pizza.precioP | currency }}</span>
                  </div>
                  <div class="price-box">
                    <span class="price-label">Grande</span>
                    <!-- ✅ Mostrar precio con símbolo de dólar -->
                    <span class="price highlight">{{ pizza.precioG | currency }}</span>
                  </div>
                </div>
                <div class="add-to-cart-buttons">
                  <ion-button (click)="addToCart(pizza, 'Personal', pizza.precioP)" expand="block" color="danger" size="small">
                    Agregar Personal +
                  </ion-button>
                  <ion-button (click)="addToCart(pizza, 'Grande', pizza.precioG)" expand="block" color="danger" size="small">
                    Agregar Grande +
                  </ion-button>
                </div>
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>
    </section>

    <section *ngSwitchCase="'hamburguesas'">
      <ion-grid>
        <ion-row>
          <ion-col size="12" size-md="6" size-lg="4" *ngFor="let burger of hamburguesas">
            <ion-card class="shake-card">
              <img [src]="getImageUrl(burger.imagen)" (error)="$event.target.src = 'https://placehold.co/300x200/1d1641/ffffff?text=Error'" />
              <ion-card-header>
                <ion-card-title>{{ burger.nombre }}</ion-card-title>
                <ion-card-subtitle *ngIf="burger.descripcion">{{ burger.descripcion }}</ion-card-subtitle>
              </ion-card-header>
              <ion-card-content class="shake-footer">
                <div class="item-prices">
                  <div class="price-box">
                    <span class="price-label">1 Carne</span>
                    <!-- ✅ Mostrar precio con símbolo de dólar -->
                    <span class="price">{{ burger.precioP | currency }}</span>
                  </div>
                  <div class="price-box">
                    <span class="price-label">Doble</span>
                    <!-- ✅ Mostrar precio con símbolo de dólar -->
                    <span class="price highlight">{{ burger.precioG | currency }}</span>
                  </div>
                </div>
                <div class="add-to-cart-buttons">
                  <ion-button (click)="addToCart(burger, '1 Carne', burger.precioP)" expand="block" color="danger" size="small">
                    Agregar 1 Carne +
                  </ion-button>
                  <ion-button (click)="addToCart(burger, 'Doble', burger.precioG)" expand="block" color="danger" size="small">
                    Agregar Doble +
                  </ion-button>
                </div>
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>
    </section>

    <section *ngSwitchCase="'bebidas'">
      <ion-grid>
        <ion-row>
          <ion-col size="12" size-md="6" size-lg="4" *ngFor="let bebida of bebidas">
            <ion-card class="shake-card">
              <img [src]="getImageUrl(bebida.imagen)" (error)="$event.target.src = 'https://placehold.co/300x200/1d1641/ffffff?text=Error'" />
              <ion-card-header>
                <ion-card-title>{{ bebida.nombre }}</ion-card-title>
                <ion-card-subtitle *ngIf="bebida.descripcion">{{ bebida.descripcion }}</ion-card-subtitle>
              </ion-card-header>
              <ion-card-content class="shake-footer">
                <!-- ✅ Mostrar precio con símbolo de dólar -->
                <span class="shake-price">{{ bebida.precio | currency }}</span>
                <ion-button (click)="addToCart(bebida, '', bebida.precio)" expand="block" color="danger" size="small">
                  Agregar +
                </ion-button>
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>
    </section>

    <section *ngSwitchCase="'hotdogs'">
      <ion-grid>
        <ion-row>
          <ion-col size="12" size-md="6" size-lg="4" *ngFor="let hotdog of hotdogs">
            <ion-card class="shake-card">
              <img [src]="getImageUrl(hotdog.imagen)" (error)="$event.target.src = 'https://placehold.co/300x200/1d1641/ffffff?text=Error'" />
              <ion-card-header>
                <ion-card-title>{{ hotdog.nombre }}</ion-card-title>
                <ion-card-subtitle *ngIf="hotdog.descripcion">{{ hotdog.descripcion }}</ion-card-subtitle>
              </ion-card-header>
              <ion-card-content class="shake-footer">
                <!-- ✅ Mostrar precio con símbolo de dólar -->
                <span class="shake-price">{{ hotdog.precio | currency }}</span>
                <ion-button (click)="addToCart(hotdog, '', hotdog.precio)" expand="block" color="danger" size="small">
                  Agregar +
                </ion-button>
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>
    </section>

  </div>
</ion-content>